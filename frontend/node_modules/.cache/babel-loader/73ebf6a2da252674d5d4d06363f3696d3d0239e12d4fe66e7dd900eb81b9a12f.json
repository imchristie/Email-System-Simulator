{"ast":null,"code":"import _slicedToArray from\"C:/Users/Christie/Desktop/CSE 186/Assignment8/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useContext}from'react';import SharedContext from'./SharedContext';import{List,ListItem,IconButton,createTheme,ListItemText,Toolbar,ListItemButton,ListItemIcon}from'@mui/material';import PersonIcon from'@mui/icons-material/Person';import StarBorderIcon from'@mui/icons-material/StarBorder';import StarIcon from'@mui/icons-material/Star';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var theme=createTheme({breakpoints:{values:{xs:0,sm:550,md:900,lg:1200,xl:1536}}});var styles=function styles(theme){return{unreadT:{fontWeight:'bold',fontSize:'large'},readT:{fontWeight:'normal'}};};var fetchMails=function fetchMails(setMails,mailbox){var user=JSON.parse(localStorage.getItem('user'));// const bearerToken = user.accessToken;\nvar fetchStr='http://localhost:3010/v0/mail?mailbox='+mailbox;fetch(fetchStr,{method:'get',headers:new Headers({'Authorization':\"Bearer \".concat(user.accessToken),'Content-Type':'application/x-www-form-urlencoded'})}).then(function(response){if(!response.ok){throw response;}return response.json();}).then(function(json){// setError('');\nsetMails(json);}).catch(function(error){console.log(error);setMails([]);// setError(`${error.status} - ${error.statusText}`);\n});};var fetchStar=function fetchStar(id){var user=JSON.parse(localStorage.getItem('user'));var fetchStr='http://localhost:3010/v0/star/'+id;fetch(fetchStr,{method:'post',headers:new Headers({'Authorization':\"Bearer \".concat(user.accessToken),'Content-Type':'application/x-www-form-urlencoded'})}).then(function(response){if(!response.ok){throw response;}return true;}).catch(function(error){console.log(error);});};/**\n * @return {object} JSX Table\n */function MailList(){var c=styles(theme);var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),mails=_React$useState2[0],setMails=_React$useState2[1];var _useContext=useContext(SharedContext),mailbox=_useContext.mailbox,setMailid=_useContext.setMailid,setMailV=_useContext.setMailV,setMailboxV=_useContext.setMailboxV,setDrawerO=_useContext.setDrawerO;var _React$useState3=React.useState(window.innerWidth>550||window.innerWidth===0?false:true),_React$useState4=_slicedToArray(_React$useState3,2),xsmdlg=_React$useState4[0],setXS=_React$useState4[1];var clicked=function clicked(id){setMailboxV(false);setMailid(id);setMailV(true);};var clickedStar=function clickedStar(e,id){e.stopPropagation();fetchStar(id);window.location.reload(false);};React.useEffect(function(){fetchMails(setMails,mailbox);var updateXS=function updateXS(){var x=window.innerWidth>550||window.innerWidth===0?false:true;setXS(x);};window.addEventListener('resize',updateXS);return function(){return window.removeEventListener('resize',updateXS);};},[mailbox]);return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return setDrawerO(false);},sx:{flexGrow:1,overflow:'auto'},children:[/*#__PURE__*/_jsx(Toolbar,{}),/*#__PURE__*/_jsxs(List,{sx:{paddingLeft:xsmdlg?'0px':'200px'},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u2003\",mailbox]}),mails.map(function(item){return/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsxs(ListItemButton,{onClick:function onClick(){return clicked(item.id);},sx:{justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(PersonIcon,{})}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'75%'},children:[/*#__PURE__*/_jsx(ListItemText,{primaryTypographyProps:item.unread?c.unreadT:c.readT,primary:item.name}),/*#__PURE__*/_jsx(ListItemText,{primaryTypographyProps:item.unread?c.unreadT:c.readT,primary:item.subject}),/*#__PURE__*/_jsx(ListItemText,{primaryTypographyProps:{style:{whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'}},primary:item.content})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ListItemText,{align:\"right\",primary:item.sent}),/*#__PURE__*/_jsx(ListItemText,{align:\"right\",primary:/*#__PURE__*/_jsx(\"br\",{})}),/*#__PURE__*/_jsx(ListItemText,{align:\"right\",primary:/*#__PURE__*/_jsxs(IconButton,{onClick:function onClick(e){return clickedStar(e,item.id);},role:\"button\",\"aria-label\":\"starred\",children:[item.star===0&&/*#__PURE__*/_jsx(StarBorderIcon,{}),item.star===1&&/*#__PURE__*/_jsx(StarIcon,{})]})})]})]},item.id)});})]})]});}export default MailList;","map":{"version":3,"names":["React","useContext","SharedContext","List","ListItem","IconButton","createTheme","ListItemText","Toolbar","ListItemButton","ListItemIcon","PersonIcon","StarBorderIcon","StarIcon","theme","breakpoints","values","xs","sm","md","lg","xl","styles","unreadT","fontWeight","fontSize","readT","fetchMails","setMails","mailbox","user","JSON","parse","localStorage","getItem","fetchStr","fetch","method","headers","Headers","accessToken","then","response","ok","json","catch","error","console","log","fetchStar","id","MailList","c","useState","mails","setMailid","setMailV","setMailboxV","setDrawerO","window","innerWidth","xsmdlg","setXS","clicked","clickedStar","e","stopPropagation","location","reload","useEffect","updateXS","x","addEventListener","removeEventListener","flexGrow","overflow","paddingLeft","map","item","justifyContent","width","unread","name","subject","style","whiteSpace","textOverflow","content","sent","star"],"sources":["C:/Users/Christie/Desktop/CSE 186/Assignment8/frontend/src/components/MailList.jsx"],"sourcesContent":["import React from 'react';\nimport {useContext} from 'react';\nimport SharedContext from './SharedContext';\nimport {List, ListItem, IconButton, createTheme,\n  ListItemText, Toolbar, ListItemButton, ListItemIcon} from '@mui/material';\nimport PersonIcon from '@mui/icons-material/Person';\nimport StarBorderIcon from '@mui/icons-material/StarBorder';\nimport StarIcon from '@mui/icons-material/Star';\n\nconst theme = createTheme({\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 550,\n      md: 900,\n      lg: 1200,\n      xl: 1536,\n    },\n  },\n});\n\nconst styles = (theme) => ({\n  unreadT: {\n    fontWeight: 'bold',\n    fontSize: 'large',\n  },\n  readT: {\n    fontWeight: 'normal',\n  },\n});\n\nconst fetchMails = (setMails, mailbox) => {\n  const user = JSON.parse(localStorage.getItem('user'));\n  // const bearerToken = user.accessToken;\n  const fetchStr = 'http://localhost:3010/v0/mail?mailbox='+ mailbox;\n  fetch(fetchStr, {\n    method: 'get',\n    headers: new Headers({\n      'Authorization': `Bearer ${user.accessToken}`,\n      'Content-Type': 'application/x-www-form-urlencoded',\n    }),\n  })\n    .then((response) => {\n      if (!response.ok) {\n        throw response;\n      }\n      return response.json();\n    })\n    .then((json) => {\n      // setError('');\n      setMails(json);\n    })\n    .catch((error) => {\n      console.log(error);\n      setMails([]);\n      // setError(`${error.status} - ${error.statusText}`);\n    });\n};\n\nconst fetchStar = (id) => {\n  const user = JSON.parse(localStorage.getItem('user'));\n  const fetchStr = 'http://localhost:3010/v0/star/'+ id;\n  fetch(fetchStr, {\n    method: 'post',\n    headers: new Headers({\n      'Authorization': `Bearer ${user.accessToken}`,\n      'Content-Type': 'application/x-www-form-urlencoded',\n    }),\n  })\n    .then((response) => {\n      if (!response.ok) {\n        throw response;\n      }\n      return true;\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\n/**\n * @return {object} JSX Table\n */\nfunction MailList() {\n  const c = styles(theme);\n  const [mails, setMails] = React.useState([]);\n  const {mailbox, setMailid, setMailV, setMailboxV,\n    setDrawerO} = useContext(SharedContext);\n  const [xsmdlg, setXS] = React.useState(((window.innerWidth>550)||\n    (window.innerWidth===0))? false : true);\n\n  const clicked = (id) => {\n    setMailboxV(false);\n    setMailid(id);\n    setMailV(true);\n  };\n\n  const clickedStar = (e, id) => {\n    e.stopPropagation();\n    fetchStar(id);\n    window.location.reload(false);\n  };\n\n  React.useEffect(() => {\n    fetchMails(setMails, mailbox);\n    const updateXS = () => {\n      const x = ((window.innerWidth>550)||\n        (window.innerWidth===0))? false : true;\n      setXS(x);\n    };\n    window.addEventListener('resize', updateXS);\n    return () => window.removeEventListener('resize', updateXS);\n  }, [mailbox]);\n\n  return (\n    <div onClick={() => setDrawerO(false)}\n      sx={{flexGrow: 1, overflow: 'auto'}}>\n      <Toolbar />\n      <List sx={{paddingLeft: (xsmdlg?'0px':'200px')}}>\n        <h2>&emsp;{mailbox}</h2>\n        {mails.map((item) => (\n          <ListItem>\n            <ListItemButton onClick={() => clicked(item.id)} key={item.id}\n              sx={{justifyContent: 'space-between'}}>\n              <ListItemIcon>\n                <PersonIcon />\n              </ListItemIcon>\n              <div style={{width: '75%'}}>\n                <ListItemText\n                  primaryTypographyProps={item.unread? c.unreadT: c.readT}\n                  primary={item.name} />\n                <ListItemText\n                  primaryTypographyProps={item.unread? c.unreadT: c.readT}\n                  primary={item.subject} />\n                <ListItemText\n                  primaryTypographyProps={{style: {whiteSpace: 'nowrap',\n                    overflow: 'hidden', textOverflow: 'ellipsis'}}}\n                  primary={item.content} />\n              </div>\n              <div>\n                <ListItemText align=\"right\"\n                  primary={item.sent}/>\n                <ListItemText align=\"right\"\n                  primary={<br/>}/>\n                <ListItemText align=\"right\"\n                  primary={\n                    <IconButton\n                      onClick={(e) => clickedStar(e, item.id)}\n                      role='button'\n                      aria-label='starred'>\n                      {(item.star === 0)&&<StarBorderIcon />}\n                      {(item.star === 1)&&<StarIcon />}\n                    </IconButton>}/>\n              </div>\n            </ListItemButton>\n          </ListItem>\n        ))}\n      </List>\n    </div>\n  );\n}\n\nexport default MailList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}